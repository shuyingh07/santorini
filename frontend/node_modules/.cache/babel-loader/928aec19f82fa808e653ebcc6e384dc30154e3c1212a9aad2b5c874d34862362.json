{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\11372\\\\Desktop\\\\s24-hw3-santorini-shuyingh07\\\\frontend\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const initialBoard = Array.from({\n    length: 5\n  }, () => Array(5).fill(null));\n  const [board, setBoard] = useState(initialBoard);\n  const [selectedCells, setSelectedCells] = useState([]);\n  const [playerStatus, setPlayerStatus] = useState(0);\n  const handleCellClick = (x, y) => {\n    if (selectedCells.length < 2) {\n      setSelectedCells(prev => [...prev, {\n        x,\n        y\n      }]);\n    }\n  };\n  useEffect(() => {\n    if (selectedCells.length === 2 && playerStatus === 0) {\n      const [cell1, cell2] = selectedCells;\n      let url = `http://localhost:8080/initWorker?worker1X=${cell1.x}&worker1Y=${cell1.y}&worker2X=${cell2.x}&worker2Y=${cell2.y}`;\n      fetch(url).then(response => {\n        if (!response.ok) {\n          throw new Error('选择错误');\n        }\n        return response.json();\n      }).then(data => {\n        console.log(data);\n        const nextPlayerStatus = data.nextPlayerStatus;\n        console.log(nextPlayerStatus);\n        setPlayerStatus(nextPlayerStatus);\n        console.log(playerStatus);\n        const color = data.playerId === 0 ? 'yellow' : 'blue';\n        setBoard(currentBoard => currentBoard.map((row, rowIndex) => row.map((cell, cellIndex) => rowIndex === cell1.x && cellIndex === cell1.y || rowIndex === cell2.x && cellIndex === cell2.y ? color : cell)));\n        setSelectedCells([]); // 清空选择以便下一次操作\n      }).catch(error => console.error('Error:', error));\n    }\n  }, [selectedCells, playerStatus]);\n  useEffect(() => {\n    if (selectedCells.length === 2 && playerStatus === 1) {\n      const [workerCell, targetCell] = selectedCells;\n      const url = `http://localhost:8080/move?worker1X=${workerCell.x}&worker1Y=${workerCell.y}&targetX=${targetCell.x}&targetY=${targetCell.y}`;\n      fetch(url).then(response => {\n        if (!response.ok) {\n          throw new Error('选择错误');\n        }\n        return response.json();\n      }).then(data => {\n        console.log(data);\n        const nextPlayerStatus = data.nextPlayerStatus;\n        setPlayerStatus(nextPlayerStatus);\n        const color = data.playerId === 0 ? 'yellow' : 'blue';\n        setBoard(currentBoard => currentBoard.map((row, rowIndex) => row.map((cell, cellIndex) => rowIndex === workerCell.x && cellIndex === workerCell.y || rowIndex === targetCell.x && cellIndex === targetCell.y ? color : cell)));\n        setSelectedCells([]); // 清空选择以便下一次操作\n      }).catch(error => console.error('Error:', error));\n    }\n  }, [selectedCells, playerStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: board.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: row.map((cell, cellIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cell\",\n        style: {\n          backgroundColor: cell || 'white'\n        },\n        onClick: () => handleCellClick(rowIndex, cellIndex)\n      }, cellIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this))\n    }, rowIndex, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"ppKbANPAhdEs/+WOZa6IVNNKD/0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","initialBoard","Array","from","length","fill","board","setBoard","selectedCells","setSelectedCells","playerStatus","setPlayerStatus","handleCellClick","x","y","prev","cell1","cell2","url","fetch","then","response","ok","Error","json","data","console","log","nextPlayerStatus","color","playerId","currentBoard","map","row","rowIndex","cell","cellIndex","catch","error","workerCell","targetCell","className","children","style","backgroundColor","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/11372/Desktop/s24-hw3-santorini-shuyingh07/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\n\r\ninterface CellPosition {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nconst App = () => {\r\n  const initialBoard = Array.from({ length: 5 }, () => Array(5).fill(null));\r\n  const [board, setBoard] = useState<string[][]>(initialBoard);\r\n  const [selectedCells, setSelectedCells] = useState<CellPosition[]>([]);\r\n  const [playerStatus, setPlayerStatus] = useState<number>(0);\r\n  const handleCellClick = (x: number, y: number) => {\r\n    if (selectedCells.length < 2) {\r\n      setSelectedCells(prev => [...prev, { x, y }]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if ((selectedCells.length === 2 && playerStatus === 0)) {\r\n      const [cell1, cell2] = selectedCells;\r\n      let url = `http://localhost:8080/initWorker?worker1X=${cell1.x}&worker1Y=${cell1.y}&worker2X=${cell2.x}&worker2Y=${cell2.y}`;\r\n  \r\n      fetch(url)\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            throw new Error('选择错误');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(data => {\r\n          console.log(data)\r\n          const nextPlayerStatus = data.nextPlayerStatus;\r\n          console.log(nextPlayerStatus)\r\n          setPlayerStatus(nextPlayerStatus);\r\n          console.log(playerStatus)\r\n  \r\n          const color = data.playerId === 0 ? 'yellow' : 'blue';\r\n          setBoard(currentBoard => \r\n            currentBoard.map((row, rowIndex) => \r\n              row.map((cell, cellIndex) => \r\n                ((rowIndex === cell1.x && cellIndex === cell1.y) || (rowIndex === cell2.x && cellIndex === cell2.y)) ? color : cell\r\n              )\r\n            )\r\n          );\r\n          setSelectedCells([]); // 清空选择以便下一次操作\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n    }\r\n  }, [selectedCells, playerStatus]);\r\n\r\n  useEffect(() => {\r\n    if (selectedCells.length === 2 && playerStatus === 1) {\r\n      const [workerCell, targetCell] = selectedCells;\r\n      const url = `http://localhost:8080/move?worker1X=${workerCell.x}&worker1Y=${workerCell.y}&targetX=${targetCell.x}&targetY=${targetCell.y}`;\r\n    \r\n      fetch(url)\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            throw new Error('选择错误');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(data => {\r\n          console.log(data)\r\n          const nextPlayerStatus = data.nextPlayerStatus;\r\n          setPlayerStatus(nextPlayerStatus);\r\n  \r\n          const color = data.playerId === 0 ? 'yellow' : 'blue';\r\n          setBoard(currentBoard => \r\n            currentBoard.map((row, rowIndex) => \r\n              row.map((cell, cellIndex) => \r\n                ((rowIndex === workerCell.x && cellIndex === workerCell.y) || (rowIndex === targetCell.x && cellIndex === targetCell.y)) ? color : cell\r\n              )\r\n            )\r\n          );\r\n          setSelectedCells([]); // 清空选择以便下一次操作\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n    }\r\n  }, [selectedCells, playerStatus]);\r\n\r\n  return (\r\n    <div className=\"board\">\r\n      {board.map((row, rowIndex) => (\r\n        <div key={rowIndex} className=\"row\">\r\n          {row.map((cell, cellIndex) => (\r\n            <div key={cellIndex} className=\"cell\" style={{ backgroundColor: cell || 'white' }} onClick={() => handleCellClick(rowIndex, cellIndex)}></div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOnB,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAMC,YAAY,GAAGC,KAAK,CAACC,IAAI,CAAC;IAAEC,MAAM,EAAE;EAAE,CAAC,EAAE,MAAMF,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC,CAAC;EACzE,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAaM,YAAY,CAAC;EAC5D,MAAM,CAACO,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAiB,EAAE,CAAC;EACtE,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAS,CAAC,CAAC;EAC3D,MAAMiB,eAAe,GAAGA,CAACC,CAAS,EAAEC,CAAS,KAAK;IAChD,IAAIN,aAAa,CAACJ,MAAM,GAAG,CAAC,EAAE;MAC5BK,gBAAgB,CAACM,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAAEF,CAAC;QAAEC;MAAE,CAAC,CAAC,CAAC;IAC/C;EACF,CAAC;EAEDlB,SAAS,CAAC,MAAM;IACd,IAAKY,aAAa,CAACJ,MAAM,KAAK,CAAC,IAAIM,YAAY,KAAK,CAAC,EAAG;MACtD,MAAM,CAACM,KAAK,EAAEC,KAAK,CAAC,GAAGT,aAAa;MACpC,IAAIU,GAAG,GAAI,6CAA4CF,KAAK,CAACH,CAAE,aAAYG,KAAK,CAACF,CAAE,aAAYG,KAAK,CAACJ,CAAE,aAAYI,KAAK,CAACH,CAAE,EAAC;MAE5HK,KAAK,CAACD,GAAG,CAAC,CACPE,IAAI,CAACC,QAAQ,IAAI;QAChB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,MAAM,CAAC;QACzB;QACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;MACxB,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,IAAI;QACZC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;QACjB,MAAMG,gBAAgB,GAAGH,IAAI,CAACG,gBAAgB;QAC9CF,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAC;QAC7BjB,eAAe,CAACiB,gBAAgB,CAAC;QACjCF,OAAO,CAACC,GAAG,CAACjB,YAAY,CAAC;QAEzB,MAAMmB,KAAK,GAAGJ,IAAI,CAACK,QAAQ,KAAK,CAAC,GAAG,QAAQ,GAAG,MAAM;QACrDvB,QAAQ,CAACwB,YAAY,IACnBA,YAAY,CAACC,GAAG,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAC7BD,GAAG,CAACD,GAAG,CAAC,CAACG,IAAI,EAAEC,SAAS,KACpBF,QAAQ,KAAKlB,KAAK,CAACH,CAAC,IAAIuB,SAAS,KAAKpB,KAAK,CAACF,CAAC,IAAMoB,QAAQ,KAAKjB,KAAK,CAACJ,CAAC,IAAIuB,SAAS,KAAKnB,KAAK,CAACH,CAAE,GAAIe,KAAK,GAAGM,IACjH,CACF,CACF,CAAC;QACD1B,gBAAgB,CAAC,EAAE,CAAC,CAAC,CAAC;MACxB,CAAC,CAAC,CACD4B,KAAK,CAACC,KAAK,IAAIZ,OAAO,CAACY,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;IACnD;EACF,CAAC,EAAE,CAAC9B,aAAa,EAAEE,YAAY,CAAC,CAAC;EAEjCd,SAAS,CAAC,MAAM;IACd,IAAIY,aAAa,CAACJ,MAAM,KAAK,CAAC,IAAIM,YAAY,KAAK,CAAC,EAAE;MACpD,MAAM,CAAC6B,UAAU,EAAEC,UAAU,CAAC,GAAGhC,aAAa;MAC9C,MAAMU,GAAG,GAAI,uCAAsCqB,UAAU,CAAC1B,CAAE,aAAY0B,UAAU,CAACzB,CAAE,YAAW0B,UAAU,CAAC3B,CAAE,YAAW2B,UAAU,CAAC1B,CAAE,EAAC;MAE1IK,KAAK,CAACD,GAAG,CAAC,CACPE,IAAI,CAACC,QAAQ,IAAI;QAChB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,MAAM,CAAC;QACzB;QACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;MACxB,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,IAAI;QACZC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;QACjB,MAAMG,gBAAgB,GAAGH,IAAI,CAACG,gBAAgB;QAC9CjB,eAAe,CAACiB,gBAAgB,CAAC;QAEjC,MAAMC,KAAK,GAAGJ,IAAI,CAACK,QAAQ,KAAK,CAAC,GAAG,QAAQ,GAAG,MAAM;QACrDvB,QAAQ,CAACwB,YAAY,IACnBA,YAAY,CAACC,GAAG,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAC7BD,GAAG,CAACD,GAAG,CAAC,CAACG,IAAI,EAAEC,SAAS,KACpBF,QAAQ,KAAKK,UAAU,CAAC1B,CAAC,IAAIuB,SAAS,KAAKG,UAAU,CAACzB,CAAC,IAAMoB,QAAQ,KAAKM,UAAU,CAAC3B,CAAC,IAAIuB,SAAS,KAAKI,UAAU,CAAC1B,CAAE,GAAIe,KAAK,GAAGM,IACrI,CACF,CACF,CAAC;QACD1B,gBAAgB,CAAC,EAAE,CAAC,CAAC,CAAC;MACxB,CAAC,CAAC,CACD4B,KAAK,CAACC,KAAK,IAAIZ,OAAO,CAACY,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;IACnD;EACF,CAAC,EAAE,CAAC9B,aAAa,EAAEE,YAAY,CAAC,CAAC;EAEjC,oBACEZ,OAAA;IAAK2C,SAAS,EAAC,OAAO;IAAAC,QAAA,EACnBpC,KAAK,CAAC0B,GAAG,CAAC,CAACC,GAAG,EAAEC,QAAQ,kBACvBpC,OAAA;MAAoB2C,SAAS,EAAC,KAAK;MAAAC,QAAA,EAChCT,GAAG,CAACD,GAAG,CAAC,CAACG,IAAI,EAAEC,SAAS,kBACvBtC,OAAA;QAAqB2C,SAAS,EAAC,MAAM;QAACE,KAAK,EAAE;UAAEC,eAAe,EAAET,IAAI,IAAI;QAAQ,CAAE;QAACU,OAAO,EAAEA,CAAA,KAAMjC,eAAe,CAACsB,QAAQ,EAAEE,SAAS;MAAE,GAA7HA,SAAS;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA0H,CAC9I;IAAC,GAHMf,QAAQ;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAIb,CACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACjD,EAAA,CAtFID,GAAG;AAAAmD,EAAA,GAAHnD,GAAG;AAwFT,eAAeA,GAAG;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}